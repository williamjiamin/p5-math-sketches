<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>RippaMathCore â€” Sketch Launcher</title>
    <style>
      *, *::before, *::after { box-sizing: border-box; }
      html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
      body {
        font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
        background: #f5efe6;
        padding: 8px;
        display: flex;
        flex-direction: column;
        -webkit-tap-highlight-color: transparent;
      }
      .container {
        max-width: 1400px;
        width: 100%;
        margin: 0 auto;
        background: #fdfbf7;
        border-radius: 14px;
        box-shadow: 0 4px 24px rgba(139, 119, 101, 0.12);
        overflow: hidden;
        border: 1px solid rgba(180, 160, 140, 0.25);
        display: flex;
        flex-direction: column;
        flex: 1;
        min-height: 0;
      }
      .header {
        background: linear-gradient(135deg, #d4b896 0%, #c4a87e 100%);
        color: #3d352b;
        padding: 12px 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }
      .header-left {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }
      .profile-row {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .profile-pic {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid rgba(255,255,255,0.95);
        box-shadow: 0 2px 6px rgba(0,0,0,0.12);
      }
      .profile-label {
        font-size: 11px;
        color: #5c5042;
        margin-top: 2px;
        font-weight: 600;
      }
      .profile-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .brand {
        font-size: 16px;
        font-weight: 700;
        color: #3d352b;
        letter-spacing: 0.3px;
      }
      .hint {
        color: #6d5f50;
        font-size: 12px;
        font-weight: 500;
      }
      .controls {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }
      .control-group {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      label {
        font-size: 13px;
        font-weight: 600;
        color: #3d352b;
        white-space: nowrap;
      }
      select {
        padding: 8px 10px;
        font-size: 14px;
        border-radius: 8px;
        border: 1px solid rgba(61, 53, 43, 0.25);
        background: rgba(255,255,255,0.85);
        color: #3d352b;
        outline: none;
        min-width: 0;
        max-width: 200px;
        -webkit-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath d='M2 4l4 4 4-4' stroke='%233d352b' stroke-width='2' fill='none'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 8px center;
        padding-right: 28px;
      }
      select:focus {
        border-color: #a08060;
        box-shadow: 0 0 0 2px rgba(160,128,96,0.2);
      }
      select option { background: #fdfbf7; color: #3d352b; }
      .body {
        background: #f0ebe3;
        padding: 6px;
        flex: 1;
        min-height: 0;
        display: flex;
        flex-direction: column;
      }
      iframe {
        width: 100%;
        flex: 1;
        min-height: 0;
        border: 0;
        border-radius: 10px;
        background: #fff;
        box-shadow: inset 0 0 0 1px rgba(180, 160, 140, 0.15);
      }

      /* ========= Mobile Responsive ========= */
      @media (max-width: 600px) {
        body { padding: 4px; }
        .container { border-radius: 10px; }
        .header {
          padding: 10px 12px;
          flex-direction: column;
          align-items: stretch;
          gap: 8px;
        }
        .header-left {
          justify-content: center;
          gap: 10px;
        }
        .brand { font-size: 14px; text-align: center; }
        .hint { text-align: center; font-size: 11px; }
        .controls {
          justify-content: center;
          gap: 6px;
        }
        .control-group { flex: 1; min-width: 0; }
        select {
          width: 100%;
          max-width: none;
          font-size: 16px; /* prevents iOS zoom */
          padding: 10px 28px 10px 10px;
        }
        label { font-size: 12px; }
        .profile-pic { width: 32px; height: 32px; }
        .body { padding: 4px; }
        iframe { border-radius: 8px; }
      }

      @media (max-width: 380px) {
        .profile-row { gap: 6px; }
        .profile-pic { width: 28px; height: 28px; }
        .profile-label { font-size: 10px; }
        .brand { font-size: 13px; }
      }

      /* Tablet tweaks */
      @media (min-width: 601px) and (max-width: 900px) {
        .header { padding: 12px 16px; }
        select { font-size: 15px; }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header-left">
          <div class="profile-row">
            <div class="profile-wrap">
              <img src="assets/me.png" alt="Rippa" class="profile-pic" />
              <span class="profile-label">Rippa</span>
            </div>
            <div class="profile-wrap">
              <img src="assets/kid.png" alt="Eon" class="profile-pic" />
              <span class="profile-label">Eon</span>
            </div>
          </div>
          <div>
            <div class="brand">RippaMathCore</div>
            <div class="hint">Pick a sketch below to launch</div>
          </div>
        </div>
        <div class="controls">
          <div class="control-group">
            <label for="sketch">Sketch</label>
            <select id="sketch">
              <option value="">-- Loading... --</option>
            </select>
          </div>
          <div class="control-group">
            <label for="ver">p5</label>
            <select id="ver">
              <option value="1.11.11">1.11.11</option>
              <option value="2.2.0">2.2.0</option>
              <option value="latest">latest</option>
            </select>
          </div>
        </div>
      </div>
      <div class="body">
        <iframe id="frame" title="sketch runner" allow="autoplay"></iframe>
      </div>
    </div>

    <!-- Auto-generated sketch list (works on file:// and http://).
         Regenerate with:  node update-sketches.js
         Or watch mode:    node update-sketches.js --watch -->
    <script>
      (function() {
        var s = document.createElement("script");
        s.src = "sketches-list.js?t=" + Date.now();
        document.head.appendChild(s);
      })();
    </script>

    <script>
      var sketchEl = document.getElementById("sketch");
      var verEl = document.getElementById("ver");
      var frame = document.getElementById("frame");

      function labelFor(filename) {
        var base = filename.replace(/\.js$/i, "");
        return base.replace(/^(\d+)\./, "$1. ");
      }

      function getSketchList() {
        var list = [];
        if (window.SKETCH_LIST && Array.isArray(window.SKETCH_LIST) && window.SKETCH_LIST.length > 0) {
          list = window.SKETCH_LIST.slice();
        }
        if (list.length === 0) {
          list.push(
            "1.The Number Line.js", "2.Interaction Line.js", "3.Make your own shape.js",
            "4.Challendge.js", "5.Negative.js", "6.Zoom.js", "7.decimal.js", "8.Absolute Value.js",
            "9.Distance Between.js", "10.Distance Between Calculation.js", "11.Coordinate.js",
            "12.Coordinate Practice.js", "13.3D Coordinate.js", "14.3D Coordinate free movement.js",
            "15.Angle.js", "16.Angle Complimentary and Supplementary .js"
          );
        }
        list.sort(function(a, b) { return a.localeCompare(b, undefined, { numeric: true }); });
        return list;
      }

      function populateSketchSelect(filenames) {
        sketchEl.innerHTML = '<option value="">-- Choose --</option>';
        filenames.forEach(function(fn) {
          var opt = document.createElement("option");
          opt.value = fn;
          opt.textContent = labelFor(fn);
          sketchEl.appendChild(opt);
        });
      }

      function update() {
        var sketch = sketchEl.value;
        var v = verEl.value;
        if (!sketch) {
          frame.removeAttribute("src");
          frame.srcdoc = "<div style='font-family:system-ui;padding:24px;color:#888;text-align:center;'>Choose a sketch above to get started.</div>";
          return;
        }
        var url = "runner.html?sketch=" + encodeURIComponent(sketch) + "&v=" + encodeURIComponent(v);
        frame.removeAttribute("srcdoc");
        frame.src = url;
      }

      sketchEl.addEventListener("change", update);
      verEl.addEventListener("change", update);

      function initSketches() {
        var list = getSketchList();
        populateSketchSelect(list);
        if (list.length > 0) {
          sketchEl.value = list[list.length - 1];
        }
        update();
      }

      if (window.SKETCH_LIST && window.SKETCH_LIST.length > 0) {
        initSketches();
      } else {
        setTimeout(initSketches, 200);
      }
    </script>
  </body>
</html>
